
def count_lines(buffer: string): int
	var index = 0
	var total = 0

	let ch => buffer[index]
	let check_end => end = buffer.length

	label loop
	if check_end then goto end

	if ch == '\n'
		total += 1

	if ch == '\r'
		total += 1

		index += 1
		if check_end then goto end

		if ch != '\n' then goto loop
	end

	index += 1
	goto loop

	label end
	return total
end